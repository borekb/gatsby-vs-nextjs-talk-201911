import { Notes, Image } from 'mdx-deck';
import { GatsbyLogo, ShoptetLogo, ReactLogo, NextLogo, SmallImg, MiddleImg } from './images';
import myTheme from './theme';
import { prism } from 'mdx-deck/themes';
export const themes = [myTheme, prism];

# Gatsby vs. Next.js

GatsbyJS meetup<br />
Prague, 14 Nov 2019

---

## I am a _software engineer_ 

---

## ... forced to make websites

---

2000's & most of 2010's:

blogs → **WordPress**<br/>
simple sites → **plain HTML**

---

# It was both ✌️ and 🤕

---

# WordPress

✅ Complex sites quickly<br/>
✅ Themes & plugins<br/>
✅ Lots of resources<br/>

---

# WordPress

🙁 Ugly old codebase<br/>
🐌 Slow by default<br/>
😭 No version control<br/>

---

# Plain old HTML

Confession: I actually enjoyed it

---

# Plain old HTML

... but was really unproductive with it

---

In the meantime, **React** ⚛️ happened

---

I quickly fell in love

---

We adopted it for VersionPress' UI in 2015

---

... and built a VP.com dashboard with it

---

### We were building _apps_ in React

---

But _websites_ were still **WordPress** & **plain HTML**

---

# 2018: Gatsby explodes 💥

<div style={{ width: '150px' }}>
  <GatsbyLogo />
</div>


---

I'm trying it for our [VP.com website](https://versionpress.com)

---

### ❤️❤️❤️ SPEEED ❤️❤️❤️

---

### no servers to ~~manage~~ hack

---

### React ⚛️

---

New kind of experience ⇒ questining old truths

---

### 🤔 Why is our dashboard an SPA?

---

<div style={{ fontSize: '0.5em' }}>

```html
<!DOCTYPE html>
<html lang="en">
  <body>
    <div id="root"></div>
    <script type="text/javascript" src="/static/vendors.js"></script>
    <script type="text/javascript" src="/static/app.js"></script>
  </body>
</html>
```

</div>

Why we're doing this to our users?

---

But we kept it. So:

Dashboard → **SPA**<br/>
Website → **Gatsby**<br/>

---

# 2019: New project

---

<div style={{ width: '150px' }}>
  <ShoptetLogo />
</div>

---

## Would Gatsby be a good fit?

---

# NO ☹️

---

## SSR is a \*must\* for e-shops

---

<img
  width='600'
  alt="Kyle's tweet about SSR"
  src='https://user-images.githubusercontent.com/101152/68533165-1d643080-0325-11ea-86a8-2036e7779c3c.png'
/>

---

<img
  width='601'
  alt="Another tweet on Gatsby's SSR"
  src='https://user-images.githubusercontent.com/101152/68535956-b6f20900-034a-11ea-82a9-fd7cac06b5e1.png'
/>

---

### By "SSR", Gatsby means build-time pre-rendering

---

<!-- Next.js -->

![Next.js](https://assets.zeit.co/image/upload/v1538361091/repositories/next-js/next-js.png)

---

## It does SSR but felt... poor in comparison

---

- Barebones (no plugin system, no themes, ...)<br/>
- No universal data layer via GraphQL<br/>
- Fewer optimizations out of the box<br/>

---

## But it had **SSR**

---

## ... and was better than other choices

<img width="777" alt="Screenshot 2019-11-14 at 00 04 50" src="https://user-images.githubusercontent.com/101152/68812104-6a703b80-0672-11ea-80de-4ffcc97228da.png" />

---

# So we tried it

---

# ... and it felt really good!

(see the pattern? ❤️❤️❤️)

---

Being **barebones** is a benefit for Shoptet

---

**Data fetching** however we want

(we chose GraphQL anyway 😄)

---

The **best deployment model** I've seen to date

---

![nextjs-different-apps](https://user-images.githubusercontent.com/101152/68861815-8fa19000-06ec-11ea-94a4-33d04492dbb1.jpeg)

[Source](https://twitter.com/abigger87/status/1175459223137701888)

---

ZEIT Now deployments 😍

▲

---

# So...

## When to use which?

---

1. For **static sites**, I'd use Gatsby <SmallImg><GatsbyLogo /></SmallImg>

---

# <SmallImg><GatsbyLogo /></SmallImg>

<div style={{textAlign: 'left'}}>

- Easily fetch data from anywhere
    - WordPress
    - Markdown
    - .csv file
- Many plugins available
- Great performance optimizations

</div>

---

2. For **apps**, I'd use Next <SmallImg><NextLogo /></SmallImg>

(Certainly not CRA / create-react-application.)

---

3. For **complex / dynamic sites**, Next <SmallImg><NextLogo /></SmallImg> is a clear choice

---

# <SmallImg><NextLogo /></SmallImg>

<div style={{textAlign: 'left'}}>

- Both pre-rendering (ala Gatsby) _and_ SSR
- Not too complex, not too simple
- Super-powers when combined with Now ▲

</div>

---

# But most importantly...

---

# Both are ⚛️

---

# ⚛️

One set of skills<br/>
Code is mostly the same<br/>
Both build on React, Babel, webpack, ...

e.g., we've been able to port Gatsby themes to Next.js

---

(4. For a **[slide deck](https://github.com/borekb/gatsby-vs-nextjs-talk-201911)**, I'd use Gatsby <SmallImg><GatsbyLogo /></SmallImg> & mdx-deck 😄.)

# Thank you!

--

<small>@borekb</small>
